import{_}from"./Dq9WTam2.js";import{u as S,Q as A,g as c,m as $,z as C,c as d,a as e,t as l,e as p,q as h,F as I,r as P,P as L,o as a,s as M}from"./DlQ9xdb8.js";const O={key:0,class:"order-container"},j={class:"order-details special-background"},B={class:"order-info"},R={class:"order-status"},D={class:"total-amount"},N={class:"order-date"},w={class:"order-actions"},E={key:0,class:"address-details"},U={key:1},q={key:2,class:"shipping-method"},F=["src","alt"],V={key:3},z={key:4,class:"order-items"},J=["src"],Q={key:5},T={__name:"[id]",setup(G){const{$axios:k}=S(),i=A(),m=M(),n=c(null),u=t=>Math.floor(t).toLocaleString("fa-IR"),r=t=>{const s=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return t.toString().replace(/[0-9]/g,o=>s[o])},f=t=>{const s=new Date(t),o=L.toJalaali(s);return`${r(o.jy)}/${r(o.jm)}/${r(o.jd)}`},b=t=>t==="pending"?"پرداخت نشده":t==="completed"?"پرداخت شده":t,g=c(!1),y=()=>!!localStorage.getItem("auth_token"),v=async()=>{if(g.value=y(),g.value)try{const t=await k.get(`user/order/${i.params.id}`);n.value=t.data.order,console.log("جزئیات سفارش:",n.value)}catch(t){console.error("خطا در دریافت جزئیات سفارش:",t)}};return $(()=>{i.params.id&&v()}),C(()=>i.params.id,t=>{t&&v()}),(t,s)=>n.value?(a(),d("div",O,[s[16]||(s[16]=e("img",{src:_,alt:"صفحه اصلی"},null,-1)),e("div",j,[e("div",B,[e("h3",null,"کد سفارش : #"+l(n.value.order_number),1),e("p",R,"وضعیت: "+l(b(n.value.status)),1),e("p",D,"مبلغ کل: "+l(r(u(n.value.total_amount)))+" تومان",1),e("p",N,"تاریخ ایجاد سفارش: "+l(f(n.value.created_at)),1),e("div",w,[n.value.status==="pending"?(a(),d("button",{key:0,class:"order-btn complete-order-btn",onClick:s[0]||(s[0]=(...o)=>t.completeOrder&&t.completeOrder(...o))},s[6]||(s[6]=[e("span",null,"✔ تکمیل سفارش",-1)]))):p("",!0),n.value.status==="pending"?(a(),d("button",{key:1,class:"order-btn cancel-order-btn",onClick:s[1]||(s[1]=(...o)=>t.cancelOrder&&t.cancelOrder(...o))},s[7]||(s[7]=[e("span",null,"✖ لغو سفارش",-1)]))):p("",!0)])])]),n.value.address?(a(),d("div",E,[s[9]||(s[9]=e("h2",null,"آدرس ارسال:",-1)),e("p",null,l(r(n.value.address.street))+", "+l(n.value.address.city),1),e("p",null,l(n.value.address.state)+", "+l(r(n.value.address.postal_code)),1),e("p",null,l(n.value.address.country),1),e("button",{class:"edit-address-btn",onClick:s[2]||(s[2]=(...o)=>t.editAddress&&t.editAddress(...o))},s[8]||(s[8]=[e("span",null,"ویرایش آدرس",-1)]))])):(a(),d("div",U,[e("button",{class:"add-address-btn",onClick:s[3]||(s[3]=(...o)=>t.addAddress&&t.addAddress(...o))},s[10]||(s[10]=[e("span",null,"افزودن آدرس",-1)]))])),n.value.shipping_method?(a(),d("div",q,[s[12]||(s[12]=e("h2",null,"روش ارسال:",-1)),e("img",{src:`${h(m).public.API_BASE_URL}${n.value.shipping_method.image.path}`,alt:n.value.shipping_method.name},null,8,F),e("p",null,l(n.value.shipping_method.name),1),e("p",null,l(r(n.value.shipping_method.description)),1),e("p",null,"هزینه ارسال: "+l(r(n.value.shipping_method.cost))+" تومان",1),e("p",null,l(r(n.value.shipping_method.delivery_time)),1),e("button",{class:"edit-shipping-method-btn",onClick:s[4]||(s[4]=(...o)=>t.editShippingMethod&&t.editShippingMethod(...o))},s[11]||(s[11]=[e("span",null,"ویرایش روش ارسال",-1)]))])):(a(),d("div",V,[e("button",{class:"add-shipping-method-btn",onClick:s[5]||(s[5]=(...o)=>t.addShippingMethod&&t.addShippingMethod(...o))},s[13]||(s[13]=[e("span",null,"افزودن روش ارسال",-1)]))])),n.value.items?(a(),d("div",z,[s[14]||(s[14]=e("h2",null,"اقلام سفارش:",-1)),e("ul",null,[(a(!0),d(I,null,P(n.value.items,o=>(a(),d("li",{key:o.id},[e("img",{src:`${h(m).public.API_BASE_URL}${o.product.image.file_path}`,alt:"Product Image",class:"product-image"},null,8,J),e("p",null,"محصول: "+l(o.product.name),1),e("p",null,"قیمت: "+l(r(u(o.price)))+" تومان",1),e("p",null,"تعداد: "+l(r(o.quantity)),1),e("p",null,"مبلغ کل: "+l(r(u(o.total)))+" تومان",1)]))),128))])])):(a(),d("div",Q,s[15]||(s[15]=[e("p",null,"اقلام سفارش یافت نشد.",-1)])))])):p("",!0)}};export{T as default};
