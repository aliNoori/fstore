import{_ as x,u as y,N as b,f as k,g as f,c as S,a,i as l,v as n,t as r,h as T,o as U}from"./DbvmAhPG.js";import{_ as R}from"./kBTGwG8s.js";const V={class:"body"},A={style:{display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},D={class:"avatar-preview"},H=["src"],I="نام خود را وارد کنید.",C="یک نام کاربری منحصربه‌فرد وارد کنید.",B="آدرس ایمیل خود را وارد کنید.",F="یک رمز عبور قوی انتخاب کنید.",N="رمز عبور را برای تأیید تکرار کنید.",q={__name:"register",setup(z){const{$axios:p}=y(),i=b(),v=k(),u=f(null),t=f({name:"",username:"",email:"",password:"",password_confirmation:""}),w=o=>{const e=o.target.files[0];if(e){const s=new FileReader;s.onload=d=>{u.value=d.target.result},s.readAsDataURL(e)}},g=()=>{document.querySelector("#avatar").click()},c=async()=>{try{const o=new FormData;o.append("name",t.value.name),o.append("username",t.value.username),o.append("email",t.value.email),o.append("password",t.value.password),o.append("password_confirmation",t.value.password_confirmation);const e=document.querySelector("#avatar").files[0];e&&o.append("image",e);const s=await p.post("user/create",o,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(s.data),s.data){alert("Registration successful!");const d=await p.post("user/login",{email:t.value.email,password:t.value.password}),m=s.data.token;i.setToken(m),localStorage.setItem("auth_token",i.token),console.log(i.token),console.log("Login successful:",m),await v.push("/")}else alert("Registration failed: "+s.data.message)}catch(o){console.error("Registration failed:",o),alert("An error occurred during registration. Please try again.")}};return(o,e)=>(U(),S("div",V,[e[14]||(e[14]=a("img",{src:R,alt:"صفحه اصلی"},null,-1)),a("form",{onSubmit:T(c,["prevent"]),enctype:"multipart/form-data"},[e[12]||(e[12]=a("h2",null,"فرم ثبت‌نام کاربر",-1)),a("p",A,[e[5]||(e[5]=a("label",{for:"avatar"},"آپلود آواتار",-1)),a("input",{type:"file",id:"avatar",ref:"avatarInput",onChange:w,accept:"image/*"},null,544),e[6]||(e[6]=a("span",{class:"help-text"},"یک فایل تصویر برای آواتار خود انتخاب کنید.",-1))]),a("div",D,[a("img",{style:{"font-family":"'Vazirmatn', sans-serif","font-size":".7rem"},src:u.value||"https://example.com/default-avatar.png",alt:"پیش‌نمایش آواتار",onClick:g},null,8,H)]),a("p",null,[e[7]||(e[7]=a("label",{for:"name"},"نام",-1)),l(a("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=s=>t.value.name=s)},null,512),[[n,t.value.name]]),a("span",{class:"help-text"},r(I))]),a("p",null,[e[8]||(e[8]=a("label",{for:"username"},"نام کاربری",-1)),l(a("input",{type:"text",id:"username","onUpdate:modelValue":e[1]||(e[1]=s=>t.value.username=s)},null,512),[[n,t.value.username]]),a("span",{class:"help-text"},r(C))]),a("p",null,[e[9]||(e[9]=a("label",{for:"email"},"ایمیل",-1)),l(a("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=s=>t.value.email=s)},null,512),[[n,t.value.email]]),a("span",{class:"help-text"},r(B))]),a("p",null,[e[10]||(e[10]=a("label",{for:"password"},"رمز عبور",-1)),l(a("input",{type:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=s=>t.value.password=s)},null,512),[[n,t.value.password]]),a("span",{class:"help-text"},r(F))]),a("p",null,[e[11]||(e[11]=a("label",{for:"password2"},"تایید رمز عبور",-1)),l(a("input",{type:"password",id:"password_confirmation","onUpdate:modelValue":e[4]||(e[4]=s=>t.value.password_confirmation=s)},null,512),[[n,t.value.password_confirmation]]),a("span",{class:"help-text"},r(N))]),e[13]||(e[13]=a("button",{type:"submit"},"ذخیره",-1))],32)]))}},P=x(q,[["__scopeId","data-v-1f74bde7"]]);export{P as default};
