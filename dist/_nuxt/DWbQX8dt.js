import{_ as S}from"./C8allebU.js";import{_ as A}from"./A3RAOlw6.js";import{u as C,Q as $,g as h,m as I,z as L,c as a,b as P,w as M,a as e,t as l,e as m,q as f,F as N,r as O,P as j,o as d,s as w}from"./BaHcIxA0.js";const B={key:0,class:"order-container"},R={class:"order-details special-background"},D={class:"order-info"},E={class:"order-status"},U={class:"total-amount"},V={class:"order-date"},q={class:"order-actions"},F={key:0,class:"address-details"},z={key:1},J={key:2,class:"shipping-method"},Q=["src","alt"],G={key:3},H={key:4,class:"order-items"},K=["src"],T={key:5},x={__name:"[id]",setup(W){const{$axios:k}=C(),u=$(),g=w(),n=h(null),p=t=>Math.floor(t).toLocaleString("fa-IR"),r=t=>{const s=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return t.toString().replace(/[0-9]/g,i=>s[i])},b=t=>{const s=new Date(t),i=j.toJalaali(s);return`${r(i.jy)}/${r(i.jm)}/${r(i.jd)}`},_=t=>t==="pending"?"پرداخت نشده":t==="completed"?"پرداخت شده":t,v=h(!1),y=()=>!!localStorage.getItem("auth_token"),c=async()=>{if(v.value=y(),v.value)try{const t=await k.get(`user/order/${u.params.id}`);n.value=t.data.order,console.log("جزئیات سفارش:",n.value)}catch(t){console.error("خطا در دریافت جزئیات سفارش:",t)}};return I(()=>{u.params.id&&c()}),L(()=>u.params.id,t=>{t&&c()}),(t,s)=>{const i=S;return n.value?(d(),a("div",B,[P(i,{to:"/"},{default:M(()=>s[6]||(s[6]=[e("img",{class:"home-page-btn",src:A,alt:"صفحه اصلی"},null,-1)])),_:1}),e("div",R,[e("div",D,[e("h3",null,"کد سفارش : #"+l(n.value.order_number),1),e("p",E,"وضعیت: "+l(_(n.value.status)),1),e("p",U,"مبلغ کل: "+l(r(p(n.value.total_amount)))+" تومان",1),e("p",V,"تاریخ ایجاد سفارش: "+l(b(n.value.created_at)),1),e("div",q,[n.value.status==="pending"?(d(),a("button",{key:0,class:"order-btn complete-order-btn",onClick:s[0]||(s[0]=(...o)=>t.completeOrder&&t.completeOrder(...o))},s[7]||(s[7]=[e("span",null,"✔ تکمیل سفارش",-1)]))):m("",!0),n.value.status==="pending"?(d(),a("button",{key:1,class:"order-btn cancel-order-btn",onClick:s[1]||(s[1]=(...o)=>t.cancelOrder&&t.cancelOrder(...o))},s[8]||(s[8]=[e("span",null,"✖ لغو سفارش",-1)]))):m("",!0)])])]),n.value.address?(d(),a("div",F,[s[10]||(s[10]=e("h2",null,"آدرس ارسال:",-1)),e("p",null,l(r(n.value.address.street))+", "+l(n.value.address.city),1),e("p",null,l(n.value.address.state)+", "+l(r(n.value.address.postal_code)),1),e("p",null,l(n.value.address.country),1),e("button",{class:"edit-address-btn",onClick:s[2]||(s[2]=(...o)=>t.editAddress&&t.editAddress(...o))},s[9]||(s[9]=[e("span",null,"ویرایش آدرس",-1)]))])):(d(),a("div",z,[e("button",{class:"add-address-btn",onClick:s[3]||(s[3]=(...o)=>t.addAddress&&t.addAddress(...o))},s[11]||(s[11]=[e("span",null,"افزودن آدرس",-1)]))])),n.value.shipping_method?(d(),a("div",J,[s[13]||(s[13]=e("h2",null,"روش ارسال:",-1)),e("img",{src:`${f(g).public.API_BASE_URL}${n.value.shipping_method.image.path}`,alt:n.value.shipping_method.name},null,8,Q),e("p",null,l(n.value.shipping_method.name),1),e("p",null,l(r(n.value.shipping_method.description)),1),e("p",null,"هزینه ارسال: "+l(r(n.value.shipping_method.cost))+" تومان",1),e("p",null,l(r(n.value.shipping_method.delivery_time)),1),e("button",{class:"edit-shipping-method-btn",onClick:s[4]||(s[4]=(...o)=>t.editShippingMethod&&t.editShippingMethod(...o))},s[12]||(s[12]=[e("span",null,"ویرایش روش ارسال",-1)]))])):(d(),a("div",G,[e("button",{class:"add-shipping-method-btn",onClick:s[5]||(s[5]=(...o)=>t.addShippingMethod&&t.addShippingMethod(...o))},s[14]||(s[14]=[e("span",null,"افزودن روش ارسال",-1)]))])),n.value.items?(d(),a("div",H,[s[15]||(s[15]=e("h2",null,"اقلام سفارش:",-1)),e("ul",null,[(d(!0),a(N,null,O(n.value.items,o=>(d(),a("li",{key:o.id},[e("img",{src:`${f(g).public.API_BASE_URL}${o.product.image.file_path}`,alt:"Product Image",class:"product-image"},null,8,K),e("p",null,"محصول: "+l(o.product.name),1),e("p",null,"قیمت: "+l(r(p(o.price)))+" تومان",1),e("p",null,"تعداد: "+l(r(o.quantity)),1),e("p",null,"مبلغ کل: "+l(r(p(o.total)))+" تومان",1)]))),128))])])):(d(),a("div",T,s[16]||(s[16]=[e("p",null,"اقلام سفارش یافت نشد.",-1)])))])):m("",!0)}}};export{x as default};
